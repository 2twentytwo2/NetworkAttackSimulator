# Cyber Attack Simulator

A environment for testing AI agents against a simple simulated computer network with subnetworks and machines with different vulnerabilities.

The aim is to retrieve sensitive documents located on certain machines on the network without being caught. Each document provides a large reward to the agent.

The attack terminates in one of the following ways:
1. the agent collects all sensitive documents = goal
2. the agent get caught = loss

The agent receives information about the network topology, specifically:
1. the machines and subnets in the network
2. which machines have the sensitive documents

The agent does not know which services are running on which machine, and hence which machines are vulnerable to which exploits.

The actions available to the agent are exploits and scan.
- exploits:
    - there is one exploit action for each possible service running, which is a envirnment parameter
- scan:
    - reveals which services are present and absent on a target machine (i.e. inspired by Nmap behaviour)

Each action must be launched against a specific machine, but actions will only possibly work on machines that are reachable.

A machine is reachable if:
1. it is on exposed subnet (subnet 1 by default) (i.e. this would be the machines available to public, e.g. webserver)
2. it is on a subnet reachable from a machine on connected subnet that has been successfuly compromised by agent

# Dependencies
- Python >3.5
- Numpy

For rendering:
- matplotlib
- networkX

## Specifying an environment

The environment is defined by:
- number of subnets
- how many machines on each subnet
- the connectivity of each subnet (i.e. which subnets are connected to each other, which are connected to the public internet)
- the possible services running
- the exploits - which service and their success probability

There are two options for generating a new environement:

**Option 1: autogenerated**
Generate an environment automatically

Environment parameters required:
- number of subnets and machines per subnet as a list
- number of services
- deterministic exploits or not

e.g. generate an environment with 3 subnets with 3, 4, 5 machines on each and running a possible 3 services with deterministic exploits

```
env = CyberAttackSimulatorEnv([3, 4, 5], 3, deterministic=True)

```

The generated environment will follow a predictable network topology with the first subnet bieng the public subnet accessible from outside and which is connected to the 2nd and 3rd subnets. The 2nd and 3rd subnets are also connected, and any remaining subnets are connected in a tree structure from the 3rd subnet (i.e. think of these as user subnets).

**Option 2: custom configuration**
Generate an environment from a configuration file. The configuration file must be a .yaml file with the following properties:

subnets:
subnet_connections
services


## Other future dev todo
1. Action space class
    1. to allow for random_choice function
    2. optimized data structure?
1. Make it compatible with openAI gym environment

## Ideas for future environment features
1. Attack abort option
    * Agent can choose to abort attack in order to avoid detection
    * Ends episode with agent recieveing only gained rewards
    * Would be a sub-optimal goal
1. Non-deterministic actions
    * exploits may fail with some probability, even when service is present on target machine
1. Each action produces a certain amount of noise which eventually leads to being caught
2. Add support for more than 3 subnets and users to specify depth (i.e. number of subnets to traverse to reach goals)
